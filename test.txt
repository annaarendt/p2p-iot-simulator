################### Settings ======================
#debug.config false
MAX_RANGE 300

#simulation.cycles 100
OBERVERS_CYCLE 50
PROTOCOL_CYCLE 20
CONTROL_CYCLE 50
battery_failure_probability 50
network.size 35
map_size 1000
random.seed 1234567890

simulation.endtime 1000
simulation.logtime 50


################### initialization ======================

init.0 example.update.EnergyInitializer
init.0.protocol energy

init.1 example.update.InetInitializer
init.1.protocol localisation
init.1.max_node_speed 60
init.1.min_node_speed 10
init.1.nodes_location_file nodes_position.csv

init.2 example.update.SoftwareDBInitializer
init.2.protocol db


################### protocols ===========================

protocol.link IdleProtocol

protocol.energy example.update.SimpleEnergy

protocol.localisation example.update.NodeCoordinates

protocol.announce example.update.Announce
protocol.announce.coord_protocol localisation
protocol.announce.energy_protocol energy
protocol.announce.max_distance MAX_RANGE
protocol.announce.transport tr
protocol.announce.step PROTOCOL_CYCLE

init.sch1 CDScheduler
init.sch1.protocol announce

protocol.db example.update.SoftwareDB

protocol.gossip example.update.SoftwareAnnounce
protocol.gossip.neighbors_protocol announce
protocol.gossip.database_protocol db
protocol.gossip.supervisor_protocol supervisor
protocol.gossip.transport tr
protocol.gossip.step PROTOCOL_CYCLE

init.sch2 CDScheduler
init.sch2.protocol gossip

protocol.tr UniformRandomTransport
protocol.tr.mindelay 0
protocol.tr.maxdelay 1

protocol.supervisor example.update.Supervisor
protocol.supervisor.database_protocol db
protocol.supervisor.transport tr

################ controls ==============================

control.nodemover example.update.NodeMover
control.nodemover.coord_protocol localisation
control.nodemover.map_size map_size
control.nodemover.step CONTROL_CYCLE
control.nodemover.data_file nodes_position.csv

control.switcher example.update.EnergySwitcher
control.switcher.energy_protocol energy
control.switcher.energy_switching_probability battery_failure_probability
control.switcher.step CONTROL_CYCLE*3


################ Observers ==============================

control.coordObserver example.update.InetObserver
control.coordObserver.coord_protocol localisation
control.coordObserver.step OBERVERS_CYCLE

control.neighobserver example.update.NeighborsObservers
control.neighobserver.neigbors_protocol announce
control.neighobserver.step OBERVERS_CYCLE

control.energyobserver example.update.SimpleEnergyObserver
control.energyobserver.energy_protocol energy
control.energyobserver.step OBERVERS_CYCLE

control.dbObserver example.update.SoftwareDBObserver
control.dbObserver.database_protocol db
control.dbObserver.step OBERVERS_CYCLE

################ Order & timings ==============================
order.protocol link,tr,energy,localisation,db,announce,gossip,supervisor
order.control coordObserver,energyobserver,neighobserver,dbObserver,nodemover,switcher

# Observers should be run once more at the end
control.neighobserver.FINAL true
control.energyobserver.FINAL true
control.coordObserver.FINAL true
control.dbObserver.FINAL true

# Observers should not run at first cycle (protocols have not been run yet)
control.neighobserver.from 2
control.energyobserver.from 2
control.coordObserver.from 2
control.dbObserver.from 2
